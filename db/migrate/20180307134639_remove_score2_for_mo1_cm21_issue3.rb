class RemoveScore2ForMo1Cm21Issue3 < ActiveRecord::Migration
  def change
    SchemeCriterion.joins(scheme_category: {scheme: {development_types: :certificate}}).where(scheme_categories: {code: 'MO'}).where("certificates.certificate_type = 1 and certificates.gsas_version = 'v2.1 Issue 3.0' and certificates.certification_type in (31,32,33)").where(number: 1, name: 'Waste Management').update_all(scores_a: YAML.load("[[0, 0.0], [1, 1.0], [3, 3.0]]\n"))

    scheme_category = SchemeCategory.unscoped.joins(scheme: {development_types: :certificate}).where(code: "MO").where("certificates.certificate_type = 1 and certificates.gsas_version = 'v2.1 Issue 3.0' and certificates.certification_type in (31,32,33)").distinct
    waste_scheme = SchemeCriterion.find_by(scheme_category: scheme_category, name: "Waste Management")
    welfare_scheme = SchemeCriterion.find_by(scheme_category: scheme_category, name: "Welfare Facilities")

    SchemeCriterionText.where(scheme_criterion: waste_scheme, name: '[I] GUIDELINES').update_all(html_text: "<p>Responsible management of waste is an essential aspect of sustainable construction practices. In this context, managing waste means waste reduction, proper waste collection, waste segregation, waste storage, waste disposal and waste records keeping.</p>\n<p>A) Waste Reduction </p>\n<p>A number of mitigation and management measures can be implemented to encourage waste reduction. These control measures include:</p>\n<p>a.\tMaintain a tidy site by implementing good housekeeping, which can reduce waste generation;</p>\n<p>b.\tOrder materials in bulk, where possible, to reduce packaging;</p>\n<p>c.\tPurchase materials with minimum of packaging waste to dispose of;</p>\n<p>d.\tRe-use as much material on site as possible; and,</p>\n<p>e.\tOrganize training programs for workers on waste management.</p>\n<p>B) Waste Collection</p>\n<p>A number of mitigation and management measures can be instigated to aid waste collection. These control measures include:</p>\n<p>a.\tWaste chutes are often used to transfer waste from vertical constructions to the ground level.</p>\n<ul>\n<li>Provide enclosed chutes where materials are dropped from height. </li>\n<li>Provide suitable enclosed protection barriers and warning signs of the hazard of falling materials into the area on which the material is dropped.</li>\n</ul><ul>\n<li>Do not remove waste materials from the lower area until handling of materials above has ceased. </li>\n<li>Ensure that waste chutes deposit the waste directly into waste skips and do not deposit them on to the ground where waste is uncontrolled.</li>\n<li>Place dust netting or similar around the skip and along the length of the chute to contain any dust clouds upon impact and also to stop any loose waste escaping.</li>\n</ul>\n<p>b.\tWaste Piles</p>\n<ul>\n<li>Do not allow construction debris and demolition material to accumulate such that it presents an environmental, health and/or safety hazard. All such materials are to be disposed off-site. </li>\n<li>Pile only contains passive waste (e.g. wood, metal, plastic, dry concrete) and no food waste, hazardous waste or wastewater.</li>\n<li>If the waste pile contains plastic, paper or other light-weight material it needs to be covered with a net/tarpaulin or similar to stop waste from blowing around.</li>\n</ul>\n<p>c.\tCollect liquid waste, such as greywater, sewage, slurry and other wastewater from source (typically a GRP tank or similar such as a septic tank) by a licensed waste collector and take off-site for disposal at a regulatory authority approved facility.</p>\n<p>C) Waste Segregation</p>\n<p>a.\tSort and segregate waste generated at source to avoid mixing of incompatible waste materials, in accordance with local regulations. Collect toxic and hazardous waste separately and dispose of in accordance with current regulations.</p>\n<p>b.\tEstablish a system for segregation for the recyclable materials and other waste on site as it is not permitted to send any mixed waste to governmental disposal grounds.</p>\n<p>c.\tClearly identify which waste should go in which skip, either with signs/pictures or by color-coding the skips.</p><p>D) Waste Storage</p>\n<p>A number of mitigation and management measures can be instigated to aid waste storage. These control measures include the following.</p>\n<p>a.\tPlace an adequate number of containers (skips, bins or similar) throughout the construction areas and temporary facilities.</p>\n<p>b.\tCollect the waste containers regularly and transfer them to the main waste storage area.</p>\n<p>c.\tContainers are to be regularly inspected. Keep the waste receptacles securely closed during accumulation (except for open-topped trash skips) and storage and seal them tightly prior to transportation from the generation area.</p>\n<p>d.\tEnsure that the storage containers are of sufficient size and number to contain all solid wastes generated between collections.</p>\n<p>e.\tProperly store all food waste in containers with closed metal or hard plastic tops to minimize the possibility of vermin infestation or odor emanating.</p>\n<p>f.\tPlace a bucket with sand near staff canteen or mess halls, for safe disposal of cigarette butts. Do not leave cigarette butts on the ground as they contain toxins .</p>\n<p>g.\tStore wood separately (either in skip or fenced off area), and do not allow to grow into a large bonfire size, where it could have safety risks.</p>\n<p>h.\tKeep flammable substances away from the sources of ignition.</p>\n<p>i.\tOld tyres are a fire hazard. Do not allow stockpiling of used tyres. Take them to a tyre recycling contractor or landfill for disposal.</p><p><span>E) Waste Disposal</span></p>\n<p>A number of mitigation and management measures can be instigated to aid waste disposal. These control measures include the following.</p>\n<p>a.\tArrange for the transfer and transportation of waste consignments with the regulatory authority approved / licensed Waste Management Contractor (WMC). Before the transportation takes place, the contents, packing, labelling and documentation of the waste should be checked.</p>\n<p>b.\tWaste shall be transported to a disposal facility approved by Regulatory Authority.</p>\n<p>c.\tCover the vehicles delivering waste to the disposal area where necessary, to prevent dropping, leaking, sifting or blowing of solid waste from the vehicle.</p>\n<p>d.\tEnsure that no waste is burnt on site.</p>\n<p>e.\tFully contain the waste generated during marine activities, keep on board and dispose of appropriately once ashore. No waste is to be disposed overboard.</p>\n<p>f.\tEnsure that marine vessels with toilet/ablution facilities include a holding tank on board for sewage, and that the holding tank is pumped out only at a designated pump out facilities and by a Regulatory Authority approved facility, but never into the sea.</p>\n<p>g.\tIt is prohibited to discharge bilge or ballast water into marine waters. Bilge and ballast waters are contaminated with oil, grease, sewage and other chemicals, and are harmful to the marine environment. Bilge and ballast water is to be stored securely on board the vessel, and then discharged into a port/ marina treatment facility.</p><p>F) Waste Records</p>\n<p>In order to ensure that waste generated throughout the Project is disposed of appropriately, some paperwork is required to assist in the tracking of waste.</p>\n<p>a.\tProof that waste material is removed from site, but also that it is disposed of appropriately at an approved location and facility.</p>\n<p>b.\tWaste records are also required to confirm that amount of waste being recycled and re-used. A waste tracking system is to be developed using a Waste Transfer Note (WTN) or in similar way.</p>\n<p>c.\tMaintain a register of all hazardous waste and disposal methods. Include in the record of waste being disposed of, the date, time, type of waste and approximate volume of waste.</p>\n<p>d.\tEnsure that these waste records are audited on a regular basis to monitor the quantity and type of waste being produced in order to analyze where improvements can be made in either reducing the quantity of waste being produced or increasing the diversion of waste from the landfill towards re-use or recycling.</p><p>G) Hazardous Waste Management</p>\n<p>A number of mitigation and management measures can be instigated to aid proper hazardous waste management. These control measures include the following.</p>\n<p>a.\tProvide fire prevention systems and pollution control equipment for storage facilities where necessary, to prevent fires or the releases of hazardous materials to the environment.</p>\n<p>b.\tDo not be use the containers intended for hazardous waste disposal for other purposes unless they are specifically labeled for the intended purpose. </p>\n<p>c.\tStore different types of hazardous waste separately to avoid adverse chemical reactions and eventual accidents.</p><p>d.\tDrain used oil or fuel filters of the residual liquids by placing them on a mesh rack in a tray or drum. Dispose of the drained filter as scrap metal. Collect the drained oil or fuel by a waste oil recycling contractor.</p>\n<p>e.\tUnused liquid paints cannot be disposed of with general waste. Dispose of only completely dried-out paint residue tins/ drums with solid waste.</p>\n<p>f.\tStore used batteries on a concreted surface or metal/ hard plastic tray. This is due to the acid content. Send used batteries for recycling.</p>\n<p>g.\tEnsure that bentonite fluid mixtures used during piling and other site works are contained. Use appropriate measures to prevent the slurry mixtures spreading to other parts of the site or adjacent works. This can be done using adequate temporary containment barriers placed around the piling bores to prevent lateral spreading of bentonite/ cement fluids.</p>\n<p>h.\tStored hazardous waste separately from non-hazardous waste and away from sources of ignition.</p>\n<p>i.\tStore hazardous waste in tightly closed, leak-proof containers made of or lined with, materials that are compatible with the hazardous waste to be stored. Clearly mark the containers with appropriate warning labels to accurately describe their contents and detailed safety precautions. Ensure that labels are waterproof, securely attached, and written in English, Arabic and other appropriate languages. Wherever possible, chemicals shall be kept in their original container.</p><p>j.\tStore and handle hazardous chemicals in accordance with the manufacturers Material Safety Data Sheet (MSDS).</p>\n<p>k.\tRelevant spill prevention measures shall be adhered to in accordance with applicable good practices.</p>\n<p>l.\tMaintain a register of all hazardous waste and disposal methods. MSDS shall be consulted by the contractor.</p>\n<p>H) Hazardous Waste Classification</p>\n<p>Table MO.1-1 below gives an example of the classification of the hazardous waste. It may change depending upon the applicable government regulations.</p>\n<table class=\"table table-bordered\">\n<colgroup>\n<col/>\n<col/>\n</colgroup>\n<tbody>\n<tr>\n<td>\n<p><span>Code</span></p>\n</td>\n<td>\n<p><span>Description</span></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><span>Y1</span></p>\n</td>\n<td>\n<p><span>Medical Waste Resulting From Hospitals And Medical Clinics And Centres</span></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><span>Y2</span></p>\n</td>\n<td>\n<p><span>Waste Resulting From Producing And Preparing Pharmaceutical Products</span></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><span>Y3</span></p>\n</td>\n<td>\n<p><span>Pharmaceutical Waste, Drugs And Medication</span></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><span>Y4</span></p>\n</td>\n<td>\n<p><span>Waste Resulting From Producing, Composing And Using Bio-Toxics And Pharmaceutical Vegetal Products</span></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><span>Y5</span></p>\n</td>\n<td>\n<p><span>Waste Resulting From Producing, Composing And Using Preservatives Of Timber</span></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><span>Y6</span></p>\n</td>\n<td>\n<p><span>Waste Resulting From Producing, Composing And Using Bio-Solvents</span></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><span>Y7</span></p>\n</td>\n<td>\n<p><span>Waste Resulting From Thermal Treatment And Mixing Operations That Contain Cyanide</span></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><span>Y8</span></p>\n</td>\n<td>\n<p><span>Waste Of Mineral Oils That Are Consumed And May Not Be Used For Its Designated Purposes.</span></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><span>Y9</span></p>\n</td>\n<td>\n<p><span>Waste Of Oils, Water, Mixtures Of Hydrocarbons With Water And Emulsions</span></p>\n</td>\n</tr>\n</tbody>\n</table><table class=\"table table-bordered\">\n<colgroup>\n<col/>\n<col/>\n</colgroup>\n<tbody>\n<tr>\n<td>\n<p><span>Y10</span></p>\n</td>\n<td>\n<p><span>Waste Of Substances And Objects Containing Or Polluted With PCBS And/Or PBBS</span></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><span>Y11</span></p>\n</td>\n<td>\n<p><span>Waste Of Tar Residual Resulting From The Refining, Distillation And Thermal Treatment Operations</span></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><span>Y12</span></p>\n</td>\n<td>\n<p><span>Waste Resulting From Producing, Composing And Using Inks, Tinctures, Colors, Paints And Varnish.</span></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><span>Y13</span></p>\n</td>\n<td>\n<p><span>Waste Resulting From Producing, Composing And Using Resins, Saps, Substances With Added Plastics, Glues And Sticking Substances.</span></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><span>Y14</span></p>\n</td>\n<td>\n<p><span>Waste Of Chemical Substances Resulting From Unknown And New Researches, Development And Educational Activities With Unknown Impacts On Humans And The Environment</span></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><span>Y15</span></p>\n</td>\n<td>\n<p><span>Waste With Explosive Nature</span></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><span>Y16</span></p>\n</td>\n<td>\n<p><span>Waste Resulting From Producing, Composing And Using Photographic Chemicals And Substances Used For Developing Films.</span></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><span>Y17</span></p>\n</td>\n<td>\n<p><span>Waste Resulting From Treating Metallic And Plastic Surfaces</span></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><span>Y18</span></p>\n</td>\n<td>\n<p><span>Waste Resulting From Industrial Waste Disposal Operations</span></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><span>Y19</span></p>\n</td>\n<td>\n<p><span>Metallic Carbonyl</span></p>\n</td>\n</tr>\n<tr>\n<td>\n<p><span>Y20</span></p>\n</td>\n<td>\n<p><span>Beryllium And Its Compounds</span></p>\n</td>\n</tr>\n</tbody>\n</table>\n<p><span>Table MO.1-1  Hazardous Waste Classification</span></p>")
    SchemeCriterionText.where(scheme_criterion: waste_scheme, name: 'MEASUREMENT').update_all(html_text: "<p>Projects shall develop and implement a Waste Management Plan for the reduction, collection, segregation, storage and disposal of waste materials.</p>")
    SchemeCriterionText.where(scheme_criterion: waste_scheme, name: 'SUBMITTAL').update_all(html_text: "<p>(I)  Submit the Waste Management Report.</p>\n<p>Supporting documents may include the following:</p>\n<ul>\n<li>Documents and drawings outlining waste prevention and reduction methods, including collection, segregation, storage, disposal of waste.</li>\n<li>Photographs, checklists, inspection reports, etc.</li>\n<li>Documents outlining treatment of hazardous waste, if applicable.</li>\n<li>Documents outlining the approach of transportation and disposal of waste such as declaration, license and third party agreement.</li>\n</ul>\n<p>(II) Submit relevant records for training and awareness generation as planned under GSAS-CMP.</p>")
    SchemeCriterionText.where(scheme_criterion: waste_scheme, name: 'SCORE').update_all(html_text: "<table class=\"table table-bordered\">\n<colgroup>\n<col/>\n<col/>\n</colgroup>\n<tbody>\n<tr>\n<td>\n<p>Score</p>\n</td>\n<td>\n<p>Requirements</p>\n</td>\n</tr>\n<tr>\n<td>\n<p>0</p>\n</td>\n<td>\n<p>Waste Management Report does not demonstrate compliance</p>\n</td>\n</tr>\n<tr>\n<td>\n<p>1</p>\n</td>\n<td>\n<p>Waste Management Report demonstrates partial compliance*</p>\n</td>\n</tr>\n<tr>\n<td>\n<p>3</p>\n</td>\n<td>\n<p>Waste Management Report demonstrates full compliance</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p>*Partial Compliance: Waste Management Report addresses hazardous waste only. </p>")

    SchemeCriterionText.create!(scheme_criterion: welfare_scheme, name: "PURPOSE", display_weight: 1, visible: true, html_text: "<p>To ensure the provision of appropriate and adequate welfare facilities for workers and staff.</p>")
    SchemeCriterionText.create!(scheme_criterion: welfare_scheme, name: "[I] GUIDELINES", display_weight: 2, visible: true, html_text: "<p>A) Indoor Environment</p>\n<ul><li>Provide a thermally comfortable environment to ensure the comfort and health of building occupants (air conditioning/heating) for all habitable buildings including offices, prayer halls and canteen areas.</li>\n<li>Ensure light levels provided in all areas of construction site in line with best practices for visual performance, comfort and safety.
</li>\n<li>Optimize the exposure of day light for interior spaces in order to improve light quality for building occupants.</li>\n<li>Minimize direct or reflected glare within occupied spaces to improve visual comfort for occupants.</li>\n<li>Provide sufficient measures to maintain adequate acoustic quality within various buildings on the construction site.</li>\n</ul><p>B) Drinking Water &amp; Washing Facilities</p>\n<ul><li>Provide cooled drinking water in site offices, canteen areas, field rest shelters and at other suitable points and ensure convenient walking distance for workers from a water station. Label drinking water using the applicable languages for construction community.</li>\n<li>Ensure that the water is of ‘wholesome’ quality and free of all contaminants by installing water filters, chlorinators and disinfection units and ensuring that water storage tanks are cleaned and maintained.</li>\n<li>Ensure that every construction site has adequate washing facilities accessible to staff and workers.</li>\n<li>Remove foul air and moisture from the rooms containing washing facilities by providing sufficient exhaust ventilation.</li>\n</ul><p>C) Sanitary Facilities &amp; Pest Control</p>\n<ul>\n<li>Ensure that every site where workers work for sufficiently long duration (say 4 hours) has adequate sanitary facilities.</li>\n<li>Ensure sufficient exhaust ventilation in the rooms containing sanitary facilities to remove foul air and moisture.</li>\n<li>Arrange septic tanks and schedule their emptying on a regular basis to prevent them from overflow. Ensure that septic tanks are of sufficient size/quantity to cope with peak load.</li>\n<li>Ensure that suitable cleaning/disinfecting procedures are implemented in all sanitary facilities, through employment of a dedicated cleaning team. </li>\n<li>Implement pest control measures in all site offices, canteen areas, washing and sanitary facilities. Ensure that pest control measures are appropriate to known/likely pests and carried out by competent persons. </li>\n</ul><p>D) Workers&rsquo; Transportation</p>\n<ul>\n<li>Ensure that the transport vehicles, either owned or hired by the contractor, are comfortable and well-maintained.</li>\n<li>Ensure that the vehicles follow the regulatory requirements for engines, vehicular emissions and safety.</li>\n<li>Ensure that transport vehicles use environment friendly consumables such as cleaning products, solvents and lubricants.</li>\n<li>Ensure that the water consumption is optimized for bus washing, through various measures.</li>\n<li>Ensure environment friendly disposal or recycling of oil, batteries and other materials.</li>\n</ul><p>E) Canteen Areas</p>\n<ul>\n<li>Ensure that canteen area is sufficiently sized and all workers and sub-contractors&rsquo; workers can be catered to and canteen areas can be approached conveniently by all workers on site.</li>\n<li>Ensure that wherever possible, canteen areas are located within suitable buildings and are away from works areas. </li>\n<li>Canteen areas are to be fitted out with tables and benches. The number of tables and benches should allow for every worker to sit at a table while eating food either collectively or in batches.</li>\n<li>Ensure that suitable cleaning/ disinfecting procedures are implemented in all canteen areas. </li>\n</ul>\n<p>F) Medical Facilities</p>\n<ul>\n<li>Provide adequate and appropriate medical provisions (first aid boxes, defibrillator kits, qualified nurse(s) &amp; doctor(s)) based on the number and distribution of workers in accordance with applicable local requirements and licenses.</li>\n<li>Ensure that all workers have a reasonably rapid access to first aid. Provide adequate first aid cover for all locations in case workers are dispersed over a wide area.</li>\n<li>Ensure that first aid staff  have completed an appropriate approved course of training, from a recognized nationally or internationally approved organization/trainer. </li>\n<li>Refer all injuries more severe than first aid cases and medical emergencies to appropriate medical control stations.</li>\n<li>Ensure that the locations of first aid boxes and defibrillator kits are clearly signed, and they are positioned for their easy access. Only qualified personnel such as the site nurses are authorized to use the medical equipment,</li>\n</ul>")
    SchemeCriterionText.create!(scheme_criterion: welfare_scheme, name: "[II] ASSESSMENT", display_weight: 11, visible: true, html_text: "")
    SchemeCriterionText.create!(scheme_criterion: welfare_scheme, name: "MEASUREMENT", display_weight: 12, visible: true, html_text: "<p>Projects shall develop and implement a Welfare Facilities Plan for on-site workers and employees.</p>\n<p>Projects shall conduct the surveys for respective sample groups from each staff category to measure the level of their satisfaction on the welfare facilities provided. These surveys shall be conducted three times throughout the construction phases, i.e. one survey per construction stage. Satisfaction level is measured by the average % score achieved in the survey. </p>")
    SchemeCriterionText.create!(scheme_criterion: welfare_scheme, name: "SUBMITTAL", display_weight: 13, visible: true, html_text: "<p>Submit the Welfare Facilities Report as along with any supporting documentation to demonstrate compliance including but not limited to filled-in survey templates, responses and relevant evidences.</p>")
    SchemeCriterionText.create!(scheme_criterion: welfare_scheme, name: "SCORE", display_weight: 14, visible: true, html_text: "<table class=\"table table-bordered\">\n<colgroup>\n<col/>\n<col/>\n</colgroup>\n<tbody>\n<tr>\n<td>\n<p>Score</p>\n</td>\n<td>\n<p>Requirements </p>\n</td>\n</tr>\n<tr>\n<td>\n<p><span>0</span></p>\n</td>\n<td>\n<p>Welfare Facilities Report does not demonstrate compliance.</p>\n</td>\n</tr>\n<tr>\n<td>\n<p><span>1</span></p>\n</td>\n<td>\n<p>Welfare Facilities Report demonstrates compliance. <br/>AND<br/>A satisfaction level in the range of 50% to 65% is achieved.</p>\n</td>\n</tr>\n<tr>\n<td>\n<p><span>2</span></p>\n</td>\n<td>\n<p>Welfare Facilities Report demonstrates compliance. <br/>AND<br/>A satisfaction level between 65%-80% is achieved.</p>\n</td>\n</tr>\n<tr>\n<td>\n<p><span>3</span></p>\n</td>\n<td>\n<p>Welfare Facilities Report demonstrates compliance. <br/>AND<br/>A satisfaction level higher than 80% is achieved. </p>\n</td>\n</tr>\n</tbody>\n</table>")
  end
end
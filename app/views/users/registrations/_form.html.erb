<% countries = CS.countries.sort_by{|_key, value| value }.to_h %>
<% resource.tap do |character| %>
	<% if character.errors.any? %>
	<div class="errors">
	<h2><%= pluralize(character.errors.count, "error") %> prohibited this character from being saved:</h2>
	<ul>
	<% character.errors.full_messages.each do |msg| %>
		<li><%= msg %></li>
	<% end %>
	</ul>
	</div>
	<% end %>
<% end %>
<fieldset class="scheduler-border">
	<legend class="scheduler-border">Personal Information</legend>
		<div class="control-group">
			<% if resource_for == 'user' %>
				<div class="row">
					<div class="col-md-4">
					<%= f.label 'Appellation' %>
					<%= f.select :name_suffix, options_for_select(["Mr.", "Ms.", "Mrs.", "Dr."], resource.name_suffix), { include_blank: "Choose Appellations" }, { class: "select2 form-control" } %>
				</div>
			</div>
			<% end %>
		<br>
		<div class="row">
			<% if resource_for == 'user' %>
				<div class="col-md-4"><%= f.input :name, required: true %></div>
				<div class="col-md-4"><%= f.input :middle_name %></div>
				<div class="col-md-4"><%= f.input :last_name %></div>
			<% else %>
				<div class="col-md-4"><%= f.label 'Name' %><%= f.input :name, required: true, label: false %></div>
			<% end %>
		</div>
		<div class="row">
			
			<div class="col-md-4">
					<%= f.input :username, required: true %>
			</div>
			<% if action != 'add' %>
				<div class="col-md-4">
					<%= f.input :practitioner_accreditation_type, collection: User.practitioner_accreditation_types.map{ |k, v| [k.titleize, k]}, include_blank: "Select Practitioner Accreditation Type", input_html: {class: "form-control"} %>
				</div>
			<% end %>
		</div>
	</div>
</fieldset>

<fieldset class="scheduler-border">
	<legend class="scheduler-border"><%= t('.user_details.contact_information') %></legend>
		<div class="control-group">
			<div class="row">
					<div class="col-md-4"><%= f.input :email, input_html: { id: 'user_email'}, required: true %></div>
					<div class="col-md-4"><%= f.input :email_alternate %></div>
					<div class="col-md-4">
							<%= f.input :country, collection: countries.map{ |cnt| [cnt[1], cnt[1]] }, include_blank: "Select Country", selected: resource.country, input_html: { class: "select2 form-control country-select", id: "user-country-select", data: {"for": "user"} }, required: true %>
					</div>
			</div>
			<div class="row">
					<div class="col-md-4">
							<%= f.input :city, collection: [resource.city], include_blank: "Select City", selected: resource.city, input_html: { class: "select2 form-control city-select", id: "user-city-select" }%>
					</div>
					<div class="col-md-4">
							<%= f.input :mobile_area_code, input_html: { id: 'mobile_area_code'}, required: true %>
					</div>
					<div class="col-md-4">
							<%= f.input :mobile, required: true %>
					</div>
			</div>
			<% if action != 'add' %>
				<div class="row">
					<div class="col-md-4">
							<%= f.input :gsas_id %>
					</div>
				</div>
			<% end %>
		</div>
</fieldset>

<fieldset class="scheduler-border">
	<legend class="scheduler-border"><%= t('.user_details.company_information') %></legend>
	<div class="control-group">
		<div class="row">
				<% if resource_for == 'user' &&  resource.role&.titleize != 'Service Provider' %>
						<div class="col-md-12">
								<label>Service Provider</label>
								<%= f.select :service_provider_id, options_for_select([[resource.service_provider&.name, resource.service_provider&.id]], resource.service_provider&.id), { include_blank: "Choose a Service Provider" }, { class: "select2 form-control", id: "select-service-provider" } %>
						</div>
				<% end %>
		</div>
		<br />
		<div class="row">
				<div class="col-md-4">
						<%= f.input :organization_name, input_html: { id: 'org_name'}, required: true %>
				</div>
				<div class="col-md-4">
						<%= f.input :organization_address, input_html: { id: 'org_address'}, required: true %>
				</div>
				<div class="col-md-4">
						<%= f.input :organization_email, input_html: { id: 'org_email'}, required: true %>
				</div>
		</div>
		<div class="row">
				<div class="col-md-4">
						<%= f.input :organization_country, collection: countries.map{ |cnt| [cnt[1], cnt[1]] }, include_blank: "Select Country", selected: resource.organization_country, input_html: { class: "select2 form-control country-select", id: "organization-country-select", data: {"for": "organization"} }, required: true %>
				</div>
				<div class="col-md-4">
						<%= f.input :organization_city, collection: [resource.organization_city], include_blank: "Select City", selected: resource.organization_city, input_html: { class: "select2 form-control city-select", id: "organization-city-select" } %>
				</div>
				<div class="col-md-4">
						<%= f.input :organization_website, input_html: { id: 'org_website', placeholder: 'http://mywebsite.com'}, required: true %>
				</div>
				
		</div>
		<div class="row">
				<div class="col-md-4">
						<%= f.input :organization_phone_area_code, input_html: { id: 'org_phone_area_code'} %>
				</div>
				<div class="col-md-4">
						<%= f.input :organization_phone, input_html: { id: 'org_phone'} %>
				</div>
				<div class="col-md-4">
						<%= f.input :organization_fax_area_code, input_html: { id: 'org_fax_area_code'}  %>
				</div>
		</div>
		<div class="row">
			<div class="col-md-4">
					<%= f.input :organization_fax, input_html: { id: 'org_fax'} %>
			</div>
		</div>
	</div>
</fieldset>

<fieldset class="scheduler-border">
    <legend class="scheduler-border"><%= t('.user_details.additional_information') %></legend>
    <div class="control-group">
     <% if resource_for == 'user' &&  resource.role&.titleize != 'Service Provider' %>
      	<%= f.simple_fields_for :user_detail, user_detail do |user_detail| %>
            <%= render partial: 'users/registrations/user_detail_fields', locals: { f: user_detail, user: resource } %>
        <% end %>
     <% else %>
		 		<%= f.simple_fields_for :service_provider_detail, service_provider_detail do |service_provider_detail| %>
            <%= render partial: 'users/registrations/service_provider_detail_fields', locals: { f: service_provider_detail, user: resource } %>
        <% end %>
     <% end %>
    </div>
</fieldset>